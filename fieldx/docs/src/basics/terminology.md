# Terminology

## Attribute Arguments{{hi:argument}} and Sub-Arguments{{hi:sub-argument}}

FieldX adopts a function-like syntax for specifying struct parameters through attributes. These parameters are referred to as _arguments_. Some arguments may require further customization, in which case they also take a function-like form and are referred to as _sub-arguments_.

This design choice supports deep nesting of parameters. For example:

```rust ignore
#[fxstruct(
    builder(
        attributes_fn(allow(dead_code)),
        doc("Builder for the struct."),
    )
)]
```

## Struct- and field-level arguments

As mentioned in the [Basics](../basics.md), the `fxstruct` macro is applied to the struct itself and utilizes parameters provided by `fieldx` attributes. Consequently, this book frequently refers to various entities (primarily attribute arguments) as either _{{i:struct-level}}_ or _{{i:field-level}}_.

For instance, it may be noted that a struct-level argument defines a default value, while a field-level argument overrides it. Similarly, certain functionalities might be available at the struct level but not at the field level.

## Helper Arguments {{hi:helper argument}}

Some arguments in FieldX are associated with implementation methods, whether generated by FieldX itself or provided by the user. These arguments are referred to as _helper arguments_, and they share some common sub-arguments. A more detailed overview of them will be provided later in this book, but for now, let's mention a literal string sub-argument that allows custom names to be defined for the argument-bound methods. Depending on the context, the argument may specify either the full name of the method or just a part of it, most commonly a prefix:

```rust ignore
#[fxstruct(get("get_"))]
```

```rust ignore
#[fieldx(get("field_alias"))]
```

## Argument Disabler {{hi:argument disabler}}

Many arguments in FieldX are boolean flags by default, meaning they enable certain functionality. However, there are cases where it may be necessary to disable functionality instead. The two most common scenarios for this are:

- Debugging or testing purposes, where functionality needs to be temporarily disabled.
- Overriding a struct-level default at the field level.

To address this, FieldX introduces the concept of an _argument disabler_: a sub-argument named `off`.

```rust ignore
#[fxstruct(get)]
struct MyStruct {
    // Override the struct-level `get`
    #[fieldx(get(off))]
    field: String,
    ...
}
```

## Builder and Builder Methods { #builder }

The term _{{i:builder}}_ in FieldX can be confusing because it is used in two distinct contexts:

1. **Builder type**{{hi:builder type}}: A type generated by the `fxstruct` macro that facilitates step-by-step construction of an instance of the annotated struct. This concept aligns with the [{{i:builder pattern}}](https://en.wikipedia.org/wiki/Builder_pattern).
2. **Builder methods**{{hi:builder method}}: User-defined methods for initializing fields lazily.

The term **builder methods** originated from similar implementations of the lazy initialization pattern in Perl and Raku modules. It was adopted in FieldX before the builder pattern was introduced, leading to the dual usage of the term. In most cases, the intended meaning is either clear from the context or explicitly clarified.

## Modes of Operation

FieldX supports three {{i:modes of operation}}: **{{i:sync}}**, **{{i:async}}**, and **{{i:plain}}** (unsync). While their names are largely self-explanatory, here is a brief overview:

- **Sync**: Designed for synchronous code, this mode ensures thread-safe access to fields.
- **Async**: Tailored for asynchronous code, this mode facilitates field access in an async context. It is particularly useful for lazy fields, enabling users to implement async builder methods.
- **Plain**: This mode does not enforce thread safety or async compatibility. Depending on the field configuration, it may explicitly lack `Sync` and `Send` traits due to its container wrapper type, or it might "incidentally" be thread-safe due to the inherent properties of the field type.

The implications of sync and async modes are explored further in [the corresponding section](modes_of_operation.md).

## Fallible and Infallible

By default, FieldX expects user-provided code to be {{i:infallible}}, meaning that it does not return a `Result`[^panic_instead]. However, this constraint can be challenging to meet in practice. To address this, FieldX offers an escape hatch: support for {{i:fallible}} code that can return a `Result` type. The only requirement is that users declare the error type their code may return.

[^panic_instead]: Of course, it is always possible to panic, but it's the behavior being frowned upon.
